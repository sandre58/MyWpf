<Project>

    <PropertyGroup>
        <EnableAnalyzers Condition="'$(EnableAnalyzers)' == ''">true</EnableAnalyzers>
        <NoWarn>$(NoWarn);SYSLIB0013;SYSLIB1054;CS1591;CS1574;NU5104;NETSDK1206;NETSDK1057</NoWarn>
        <SuppressNETCoreSdkPreviewMessage>true</SuppressNETCoreSdkPreviewMessage>
    </PropertyGroup>
    
    <PropertyGroup Condition="'$(EnableAnalyzers)' == 'true'">
        
        <!-- Enable analyzers during build -->
        <EnableNETAnalyzers>true</EnableNETAnalyzers>

        <!-- Enforce rules on all projects -->
        <AnalysisMode>AllEnabledByDefault</AnalysisMode>
        <AnalysisLevel>latest</AnalysisLevel>
        
        <!-- Ignore specific SDK warnings -->
        <NoWarn>$(NoWarn);SYSLIB0013;SYSLIB1054;CS1591;CS1574;NU5104;NETSDK1206;NETSDK1057</NoWarn>

        <!-- Include code analysis in all configurations -->
        <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>
        <RunAnalyzersDuringBuild>true</RunAnalyzersDuringBuild>
        <RunAnalyzersDuringLiveAnalysis>true</RunAnalyzersDuringLiveAnalysis>
    </PropertyGroup>

    <!-- Analysis configuration files -->
    <ItemGroup Condition="'$(EnableAnalyzers)' == 'true'">
        <AdditionalFiles Include="$(MSBuildThisFileDirectory)..\stylecop.json" Link=".stylecop.json" Visible="False" />
    </ItemGroup>

    <!-- Add common analyzer packages -->
    <ItemGroup Condition="'$(EnableAnalyzers)' == 'true'">
        <!-- Analyzers Microsoft -->
        <PackageReference Include="Microsoft.CodeAnalysis.NetAnalyzers" Version="10.0.100-rc.1.25451.107" PrivateAssets="all" />
        <!-- StyleCop -->
        <PackageReference Include="StyleCop.Analyzers" Version="1.2.0-beta.556" PrivateAssets="all" />
        <!-- Roslynator -->
        <PackageReference Include="Roslynator.Analyzers" Version="4.14.0" PrivateAssets="all" />
    </ItemGroup>

</Project>